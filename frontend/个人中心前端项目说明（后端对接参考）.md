## 技术栈

- 框架：Vue 3（Composition API + `<script setup>`）
- 状态管理：Pinia
- 路由：Vue Router
- 样式：CSS（通过外部文件引入）
- 图标：Font Awesome

## 项目结构

plaintext

```plaintext
src/
├── assets/           # 静态资源（CSS等）
├── components/       # 通用组件
│   ├── AvatarModal.vue   # 头像上传模态框
│   ├── NameModal.vue     # 用户名修改模态框
│   └── SettingsModal.vue # 账户设置模态框
├── router/           # 路由配置
├── stores/           # Pinia状态管理
├── views/            # 页面视图
│   ├── StudentIndex.vue  # 学生端主页
│   └── TeacherIndex.vue  # 教师端主页
├── App.vue           # 根组件
└── main.ts           # 入口文件
```

## 核心功能模块

### 1. 学生端（/student）

- 个人信息管理（头像、用户名、个人简介修改）
- 学情分析（学习时长、已学课程等数据统计）
- 正在学习的课程（进度展示）
- 课程收藏管理
- 学习社区（组队学习、自习室、讨论区）
- 学习成就展示

### 2. 教师端（/teacher）

- 个人信息管理
- 课程管理（创建、编辑、查看数据）
- 学生管理（学习进度、状态监控）
- 教学数据统计（总学习时长、学生数、评分等）

## 状态管理（Pinia）

主要用户状态存储在`user` store 中，包含以下核心字段：

typescript

运行

```typescript
{
  name: string,        // 用户名
  avatar: string,      // 头像URL
  bio: string,         // 个人简介
  stats: {             // 统计数据
    learnHours: number, // 学习时长
    courses: number,    // 已学课程数
    followers: number,  // 收藏课程数
    following: number   // 关注数
  }
}
```

## 接口交互预期（供后端参考）

### 用户相关

- `GET /api/user` - 获取当前用户信息
- `PUT /api/user` - 更新用户基本信息（姓名、简介等）
- `POST /api/user/avatar` - 上传头像

### 学生相关

- `GET /api/student/courses` - 获取学生课程列表（正在学习、收藏）
- `GET /api/student/stats` - 获取学习统计数据
- `GET /api/student/community` - 获取社区相关数据（组队、自习室、讨论）
- `GET /api/student/achievements` - 获取成就列表

### 教师相关

- `GET /api/teacher/courses` - 获取教师课程列表
- `GET /api/teacher/students` - 获取学生列表及进度
- `GET /api/teacher/analytics` - 获取教学统计数据
- `POST /api/teacher/courses` - 创建新课程

## 路由配置

- `/` - 默认重定向到`/student`
- `/student` - 学生端主页
- `/teacher` - 教师端主页

## 开发与部署

1. 安装依赖：`npm install`
2. 开发环境：`npm run dev`
3. 构建生产版本：`npm run build`

## 注意事项

- 前端使用了模拟数据（如课程列表、学生列表），实际使用时需替换为后端接口数据
- 模态框组件（头像、用户名、设置）已实现基础交互逻辑，需后端配合完成数据持久化
- 样式通过外部 CSS 文件管理，如需调整 UI 样式可修改对应 CSS 文件

## ❗开发调试
auth.service.js 
```js
/* 开发调试：直接返回永不过期假 token（仅本地用） */
    if (phone === '13900139001' && password === '123456') {
      const fakeToken = jwt.sign(
        { userId: 5, role: 'instructor' },
        process.env.JWT_SECRET,
        { expiresIn: '10y' }
      );
      return { token: fakeToken, user: { user_id: 5, role: 'instructor' } };
    }
```

#### 教师端
**浏览器控制台执行**
```js
// 重新登录拿新 token（确保返回体干净）
fetch('http://localhost:8080/api/auth/login', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ phone: '13900139001', password: '123456' })
})
.then(r => r.json())
.then(res => {
  localStorage.setItem('token', res.data.token);
  localStorage.setItem('role', 'instructor');   // 关键：手动写角色
  location.reload();                            // 刷新页面
});
```
**验证**
```js
localStorage.getItem('token')
```
**F5 刷新**

#### 学生端
**浏览器临时调试，拿学生账号**
```js
// 1. 拿学生 token（已存在的测试账号）
fetch('http://localhost:8080/api/auth/login', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ phone: '13800138001', password: '123456' })
}).then(r => r.json()).then(res => {
  // 2. 覆盖本地 token
  localStorage.setItem('token', res.data.token);
  localStorage.setItem('role', 'learner');
  // 3. 重进学生中心
  location.reload();
});
```
#### 上线前
- 恢复 `requireRole('learner')`
- 前端根据 `localStorage.getItem('role')` 自动跳对应首页即可
任选一种，学生端就不会再报“权限不足”。